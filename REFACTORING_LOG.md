# 로그아웃 로직 리팩토링: URL 쿼리 파라미터 방식 도입

## 1. 기존 방식의 문제점

이전의 로그아웃 처리 방식은 정상적으로 동작했지만, 다음과 같은 불편한 점이 있었습니다.

- **불필요한 컴포넌트**: 오직 카카오 로그아웃 후 리디렉션되어 로그아웃 처리만을 위해 존재하는 `SNSLogout.tsx` 페이지 컴포넌트가 필요했습니다. 이는 코드베이스를 불필요하게 복잡하게 만들었습니다.
- **분산된 로직**: 로그아웃 과정이 `Header.tsx` (클릭) -> 카카오 페이지 -> `SNSLogout.tsx` (처리) -> `AuthContext.tsx` (상태 업데이트) 등 여러 파일에 걸쳐 있어 전체 흐름을 파악하고 유지보수하기 번거로웠습니다.

## 2. 새로운 해결 방식: URL 쿼리 파라미터 활용

더 깔끔하고 효율적인 처리를 위해, 별도의 리디렉션 페이지를 없애고 URL 쿼리 파라미터를 사용하는 방식으로 구조를 개선했습니다.

- **핵심 아이디어**: 카카오 로그아웃 후, 특정 페이지(`SNSLogout`)로 이동하는 대신 메인 페이지(`/`)로 돌아오되, URL에 `?status=logged_out`과 같은 식별자를 추가합니다.
- **로직 처리**: 앱의 인증 상태를 총괄하는 `AuthContext`가 앱 로드 시 이 URL 식별자를 감지하여, 해당하는 로그아웃 로직을 직접 수행합니다.

## 3. 구체적인 변경 사항

### 1. 카카오 로그아웃 리디렉션 URI 변경

- **파일**: `.env`
- **내용**: 카카오 로그아웃 후 돌아올 주소를 메인 페이지로 변경하고, 쿼리 파라미터를 추가했습니다.
- **변경 전**: `VITE_KAKAO_LOGOUT_REDIRECT_URI=http://localhost:5173/auth/kakao/logout`
- **변경 후**: `VITE_KAKAO_LOGOUT_REDIRECT_URI=http://localhost:5173/?status=logged_out`

### 2. `AuthContext`에 로그아웃 처리 로직 통합

- **파일**: `src/AuthContext.tsx`
- **내용**: `useEffect` 훅 내부에 앱이 로드될 때 URL의 쿼리 파라미터를 확인하는 로직을 추가했습니다. `status=logged_out`이 감지되면, `logout()` 함수를 호출하여 사용자 상태를 업데이트하고, 브라우저 히스토리에서 해당 쿼리 파라미터를 제거하여 URL을 깔끔하게 정리합니다.

### 3. `SNSLogout` 컴포넌트 및 라우트 제거

- **파일**: `src/main.tsx`
- **내용**: 더 이상 필요 없어진 `SNSLogout` 컴포넌트의 `import` 구문과, `/auth/kakao/logout` 경로를 처리하던 라우트 설정을 완전히 제거했습니다.

- **파일**: `src/pages/SNSLogout.tsx`
- **내용**: 해당 파일을 프로젝트에서 완전히 삭제했습니다.

## 4. 결론

이번 리팩토링을 통해, 불필요한 `SNSLogout` 컴포넌트를 제거하고 로그아웃 관련 로직을 `AuthContext` 한 곳으로 집중시켰습니다. 그 결과, 코드의 양이 줄어들고 구조가 단순해져 가독성과 유지보수성이 크게 향상되었습니다.
